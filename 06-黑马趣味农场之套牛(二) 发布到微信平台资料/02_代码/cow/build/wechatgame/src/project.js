window.__require=function e(t,o,n){function c(s,i){if(!o[s]){if(!t[s]){var a=s.split("/");if(a=a[a.length-1],!t[a]){var u="function"==typeof __require&&__require;if(!i&&u)return u(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+s+"'")}}var l=o[s]={exports:{}};t[s][0].call(l.exports,function(e){return c(t[s][1][e]||e)},l,l.exports,e,t,o,n)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<n.length;s++)c(n[s]);return c}({HttpUtils:[function(e,t,o){"use strict";cc._RF.push(t,"77c8fOWP8BDZY0NPX7QnWeV","HttpUtils");var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(){c(this,e)}return n(e,[{key:"request",value:function(e){if("[object Object]"===String(e)){e.method=e.method?e.method.toUpperCase():"GET",e.data=e.data||{};var t=[];for(var o in e.data)t.push("".concat(o,"=",e.data[o]));e.data=t.join("&"),"GET"===e.method&&(e.url+=0===location.search.length?"".concat("?",e.data):"".concat("&",e.data));var n=new XMLHttpRequest;n.responseType=e.responseType||"json",n.onreadystatechange=function(){4===n.readyState&&(200===n.status?e.success&&"function"==typeof e.success&&e.success(n.response):e.error&&"function"==typeof e.error&&e.error())},n.open(e.method,e.url,!0),"POST"===e.method&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send("POST"===e.method?e.data:null)}}}]),e}();t.exports=new r,cc._RF.pop()},{}],cow:[function(e,t,o){"use strict";cc._RF.push(t,"b3fe7A3z5FIT5NB5blhEDB7","cow");var n=cc.Class({name:"cow_skin",properties:{cows:{default:[],type:[cc.SpriteFrame]}}});cc.Class({extends:cc.Component,properties:{cow_sets:{default:[],type:[n]}},onLoad:function(){this.intervalTime=0,this.randomType=Math.floor(3*Math.random())},start:function(){},update:function(e){this.intervalTime+=e;var t=Math.floor(this.intervalTime/.2);t%=3;var o=this.cow_sets[this.randomType];this.node.getComponent(cc.Sprite).spriteFrame=o.cows[t]},runCallback:function(){cc.log("\u4e00\u4e2a\u8f6e\u56de\u7ed3\u675f\uff01"),this.randomType=Math.floor(3*Math.random())}}),cc._RF.pop()},{}],game:[function(e,t,o){"use strict";cc._RF.push(t,"ed6462gOEFMo5nIDdr724Er","game");var n=e("HttpUtils");cc.Class({extends:cc.Component,properties:{rope_node:{default:null,type:cc.Node},cow_ins:{default:null,type:cc.Node},rope_imgs:{default:[],type:cc.SpriteFrame},cow_prefab:{default:null,type:cc.Prefab},time:0},onLoad:function(){this.success=!1,this.scoreNum=0,console.log("\u5fae\u4fe1\u5f00\u53d1666")},start:function(){var e=cc.find("Canvas/bg_sprite/count_down").getComponent(cc.Label);e.string=this.time+"s",this.schedule(function(){if(this.time--,e.string=this.time+"s",0==this.time){cc.log("\u6e38\u620f\u7ed3\u675f\uff01");var t=cc.find("Canvas/result"),o=t.getChildByName("title"),c=t.getChildByName("content");o.getComponent(cc.Label).string="\u6700\u7ec8\u5f97\u5206 "+this.scoreNum;var r=c.getComponent(cc.Label);switch(!0){case this.scoreNum<=3:r.string="\u5957\u725b\u9752\u94dc";break;case this.scoreNum<6:r.string="\u5957\u725b\u9ad8\u624b";break;case this.scoreNum>=6:r.string="\u5957\u725b\u738b\u8005"}t.active=!0;var s=this.scoreNum;wx.login({success:function(e){e.code&&n.request({url:"http://localhost:8080/updateScore",method:"POST",data:{code:e.code,score:s}})}}),cc.director.pause()}},1);var t=wx.getSystemInfoSync(),o=t.screenWidth,c=t.screenHeight,r=wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:o,height:c,lineHeight:40,backgroundColor:"#00000000",color:"#ffffff"}}),s=this;r.onTap(function(e){console.log(e.userInfo);var t=e.userInfo;s.wxLogin(t),r.destroy()}),wx.getUserInfo({success:function(e){var t=e.userInfo;s.wxLogin(t)},fail:function(){console.log("\u83b7\u53d6\u5931\u8d25")}});var i=wx.createBannerAd({adUnitId:"adunit-7d733ad66a23b87b",style:{left:27.5,top:80,width:320}});i.onError(function(e){console.log(e)}),i.show()},wxLogin:function(e){var t=cc.find("Canvas/bg_sprite/icon").getComponent(cc.Sprite);cc.loader.load({url:e.avatarUrl,type:"png"},function(e,o){t.spriteFrame=new cc.SpriteFrame(o)}),wx.login({success:function(t){t.code?n.request({url:"http://localhost:8080/login",method:"POST",data:{code:t.code,nickName:e.nickName,avatarUrl:e.avatarUrl},success:function(e){console.log(e)}}):console.log("\u767b\u5f55\u5931\u8d25"+t.errMsg)}})},clickCapture:function(e,t){this.rope_node.active=!0,this.rope_node.setSiblingIndex(100),this.rope_node.y=-480;var o=cc.moveTo(.5,this.rope_node.x,60),n=cc.callFunc(function(){var e=this.cow_ins.x;if(e>-100&&e<100){cc.log("\u6355\u6349\u6210\u529f\uff01");var t=this.node.getChildByName("bg_sprite");t.removeChild(this.cow_ins);var o=this.cow_ins.getComponent("cow").randomType+1;this.rope_node.getComponent(cc.Sprite).spriteFrame=this.rope_imgs[o],this.cow_ins=cc.instantiate(this.cow_prefab),this.cow_ins.y=0,t.addChild(this.cow_ins),this.success=!0,this.scoreNum++}else cc.log("\u6355\u6349\u5931\u8d25\uff01")},this),c=cc.moveTo(.5,this.rope_node.x,-600),r=cc.callFunc(function(){(this.rope_node.getComponent(cc.Sprite).spriteFrame=this.rope_imgs[0],1==this.success)&&(cc.find("Canvas/bg_sprite/score").getComponent(cc.Label).string="Score:"+this.scoreNum,this.success=!1)},this),s=cc.sequence(o,n,c,r);this.rope_node.runAction(s)},closeBtn:function(){cc.log("\u7ee7\u7eed\u6e38\u620f"),cc.director.resume(),cc.director.loadScene("game")},shareBtn:function(){wx.shareAppMessage({title:"\u5927\u5bb6\u90fd\u6765\u73a9\u5957\u725b\u5c0f\u6e38\u620f",imageUrl:"http://img.zhubohome.com.cn/game_share.png",success:function(e){console.log(e)},fail:function(e){console.log(e)}})}}),cc._RF.pop()},{HttpUtils:"HttpUtils"}]},{},["HttpUtils","cow","game"]);