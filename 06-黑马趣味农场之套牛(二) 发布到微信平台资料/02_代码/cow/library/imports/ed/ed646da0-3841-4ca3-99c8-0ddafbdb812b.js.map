{"version":3,"sources":["assets\\scripts\\game.js"],"names":["httpUtils","require","cc","Class","Component","properties","rope_node","type","Node","cow_ins","rope_imgs","SpriteFrame","cow_prefab","Prefab","time","onLoad","success","scoreNum","console","log","start","countDownLabel","find","getComponent","Label","string","schedule","resultNode","titleNode","getChildByName","contentNode","contentLabel","active","score","wx","login","res","code","request","url","method","data","director","pause","sysInfo","getSystemInfoSync","screenWidth","screenHeight","wxLoginBtn","createUserInfoButton","text","style","left","top","width","height","lineHeight","backgroundColor","color","self","onTap","userInfo","wxLogin","destroy","getUserInfo","fail","bannerAd","createBannerAd","adUnitId","onError","err","show","icon","Sprite","loader","load","avatarUrl","texture","spriteFrame","nickName","msg","errMsg","clickCapture","event","customEventDate","setSiblingIndex","y","up","moveTo","x","result","callFunc","currentX","bgNode","node","removeChild","ropeType","randomType","instantiate","addChild","down","finish","scoreLabel","sequence","runAction","closeBtn","resume","loadScene","shareBtn","shareAppMessage","title","imageUrl"],"mappings":"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","sourceRoot":"/","sourcesContent":["let httpUtils = require(\"HttpUtils\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        rope_node: {\r\n            default : null,\r\n            type : cc.Node\r\n        },\r\n        cow_ins: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        rope_imgs: {\r\n            default:[],\r\n            type:cc.SpriteFrame\r\n        },\r\n        cow_prefab: {\r\n            default:null,\r\n            type:cc.Prefab\r\n        },\r\n        time:0\r\n\r\n\r\n    },\r\n\r\n    onLoad() {\r\n        this.success = false;\r\n        // 初始分数\r\n        this.scoreNum = 0;\r\n\r\n        console.log(\"微信开发666\");\r\n    },\r\n    start () {\r\n        let countDownLabel = cc.find(\"Canvas/bg_sprite/count_down\").getComponent(cc.Label);\r\n        countDownLabel.string = this.time + \"s\";\r\n        this.schedule(function () {\r\n            this.time --;\r\n            countDownLabel.string = this.time + \"s\";\r\n            if (this.time == 0) {\r\n                cc.log(\"游戏结束！\");\r\n                // 获取弹窗节点\r\n                let resultNode = cc.find(\"Canvas/result\");\r\n                // 获取title和content两个节点\r\n                let titleNode = resultNode.getChildByName(\"title\");\r\n                let contentNode = resultNode.getChildByName(\"content\");\r\n                // 展示分数\r\n                titleNode.getComponent(cc.Label).string = \"最终得分 \" + this.scoreNum;\r\n                // 获取组件\r\n                let contentLabel = contentNode.getComponent(cc.Label);\r\n                switch (true) {\r\n                    case this.scoreNum <= 3:\r\n                        contentLabel.string = \"套牛青铜\";\r\n                        break;\r\n                    case this.scoreNum < 6:\r\n                        contentLabel.string = \"套牛高手\";\r\n                        break;\r\n                    case this.scoreNum >= 6:\r\n                        contentLabel.string = \"套牛王者\";\r\n                        break;\r\n\r\n                }\r\n                resultNode.active = true;\r\n                let score = this.scoreNum;\r\n                wx.login({\r\n                    success(res) {\r\n                        if (res.code) {\r\n                            httpUtils.request({\r\n                                url:\"http://localhost:8080/updateScore\",\r\n                                method: \"POST\",\r\n                                data:{\r\n                                    code:res.code,\r\n                                    score:score\r\n                                }\r\n                            });\r\n                          /*  wx.request({\r\n                                url:\"http://localhost:8080/updateScore\",\r\n                                method: \"POST\",\r\n                                header: {\r\n                                    'content-type':\"application/x-www-form-urlencoded\"\r\n                                },\r\n                                data:{\r\n                                    code:res.code,\r\n                                    score:score\r\n                                }\r\n                            })*/\r\n                        }\r\n                    }\r\n                })\r\n\r\n                cc.director.pause();\r\n\r\n            }\r\n\r\n        },1);\r\n\r\n\r\n        let sysInfo = wx.getSystemInfoSync();\r\n        // 获取微信界面大小\r\n        let screenWidth = sysInfo.screenWidth;\r\n        let screenHeight = sysInfo.screenHeight;\r\n\r\n        // 创建一个用户授权按钮\r\n        const wxLoginBtn = wx.createUserInfoButton({\r\n            type:\"text\",\r\n            text:\"\",\r\n            style:{\r\n                left:0,\r\n                top:0,\r\n                width:screenWidth,\r\n                height:screenHeight,\r\n                lineHeight:40,\r\n                backgroundColor: '#00000000',\r\n                color: '#ffffff',\r\n            }\r\n        });\r\n\r\n        let self = this;\r\n        wxLoginBtn.onTap((res) => {\r\n           console.log(res.userInfo);\r\n           // 拿到微信用户信息\r\n            let userInfo = res.userInfo;\r\n            self.wxLogin(userInfo);\r\n            wxLoginBtn.destroy();\r\n\r\n        });\r\n\r\n        wx.getUserInfo({\r\n            success(res) {\r\n                // 拿到用户信息\r\n                let userInfo = res.userInfo;\r\n                self.wxLogin(userInfo);\r\n            },\r\n            fail() {\r\n                console.log(\"获取失败\");\r\n            }\r\n        });\r\n\r\n        // 微信广告位\r\n        let bannerAd = wx.createBannerAd({\r\n           adUnitId:\"adunit-7d733ad66a23b87b\",\r\n           style: {\r\n               left :27.5,\r\n               top:80,\r\n               width: 320\r\n           }\r\n        });\r\n        bannerAd.onError(err=> {\r\n            console.log(err);\r\n        });\r\n        bannerAd.show();\r\n\r\n\r\n\r\n\r\n\r\n    },\r\n\r\n    wxLogin(userInfo) {\r\n\r\n        let icon = cc.find(\"Canvas/bg_sprite/icon\").getComponent(cc.Sprite);\r\n        // 加载远程网络图片\r\n        cc.loader.load({url:userInfo.avatarUrl,type:\"png\"},function (err,texture) {\r\n            icon.spriteFrame = new cc.SpriteFrame(texture);\r\n        });\r\n\r\n        wx.login({\r\n            success(res) {\r\n                if (res.code) {\r\n                    // 发起网络请求给游戏后台\r\n                    httpUtils.request({\r\n                        url:\"http://localhost:8080/login\",\r\n                        method: \"POST\",\r\n                        data:{\r\n                            code:res.code,\r\n                            nickName:userInfo.nickName,\r\n                            avatarUrl:userInfo.avatarUrl\r\n                        },\r\n                        success(msg) {\r\n                            console.log(msg);\r\n                        }\r\n                    })\r\n                /*    wx.request({\r\n                        url:\"http://localhost:8080/login\",\r\n                        method: \"POST\",\r\n                        header:{\r\n                            'content-type':'application/x-www-form-urlencoded'\r\n                        },\r\n                        data:{\r\n                            code:res.code,\r\n                            nickName:userInfo.nickName,\r\n                            avatarUrl:userInfo.avatarUrl\r\n                        }\r\n                    })*/\r\n                } else {\r\n                    console.log(\"登录失败\"+ res.errMsg);\r\n                }\r\n            }\r\n        })\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n\r\n    /**\r\n     *  捕获按钮点击事件\r\n     * @param event\r\n     * @param customEventDate\r\n     */\r\n    clickCapture:function (event,customEventDate) {\r\n        this.rope_node.active = true;\r\n        // 设置绳子在当前父节点的顺序\r\n        this.rope_node.setSiblingIndex(100);\r\n\r\n        // 设置绳子起始位置\r\n        this.rope_node.y = -480;\r\n        // 向上移动\r\n        const up = cc.moveTo(0.5,this.rope_node.x,60);\r\n\r\n        // 判定结果\r\n        let result =  cc.callFunc(function () {\r\n            // 获取当前牛儿的x点\r\n            let currentX = this.cow_ins.x;\r\n            if (currentX > -100 && currentX < 100){\r\n                cc.log(\"捕捉成功！\");\r\n                // 移除\r\n                let bgNode = this.node.getChildByName(\"bg_sprite\");\r\n                bgNode.removeChild(this.cow_ins);\r\n                // 获取牛儿的类型\r\n                let ropeType = this.cow_ins.getComponent(\"cow\").randomType +1;\r\n                this.rope_node.getComponent(cc.Sprite).spriteFrame = this.rope_imgs[ropeType];\r\n                // 生成新的牛节点\r\n                this.cow_ins = cc.instantiate(this.cow_prefab);\r\n                this.cow_ins.y = 0;\r\n                bgNode.addChild(this.cow_ins);\r\n                //\r\n                this.success = true;\r\n                // 分数+1\r\n                this.scoreNum ++;\r\n            } else {\r\n                cc.log(\"捕捉失败！\")\r\n            }\r\n\r\n        },this);\r\n        // 往回拉\r\n        let down = cc.moveTo(0.5,this.rope_node.x,-600);\r\n\r\n        let finish = cc.callFunc(function () {\r\n            this.rope_node.getComponent(cc.Sprite).spriteFrame = this.rope_imgs[0];\r\n            // 判断是否捕捉成功\r\n            if (this.success == true) {\r\n                let  scoreLabel = cc.find(\"Canvas/bg_sprite/score\").getComponent(cc.Label);\r\n                scoreLabel.string = \"Score:\" + this.scoreNum;\r\n                this.success = false;\r\n            }\r\n        },this)\r\n\r\n        // 定义一个序列动画\r\n        let sequence = cc.sequence(up,result,down,finish);\r\n        this.rope_node.runAction(sequence);\r\n\r\n\r\n    },\r\n\r\n    // 关闭按钮，继续游戏\r\n    closeBtn() {\r\n        cc.log(\"继续游戏\");\r\n        cc.director.resume();\r\n        cc.director.loadScene(\"game\");\r\n    },\r\n\r\n    // 微信分享\r\n    shareBtn() {\r\n        wx.shareAppMessage({\r\n            title : \"大家都来玩套牛小游戏\",\r\n            imageUrl: \"http://img.zhubohome.com.cn/game_share.png\",\r\n            success(res) {\r\n                console.log(res);\r\n            },\r\n            fail(res) {\r\n                console.log(res);\r\n            }\r\n        })\r\n    }\r\n});\r\n"]}